<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Loc (read-dwarf.Dw__.Loc)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">read-dwarf</a> &#x00BB; <a href="../index.html">Dw__</a> &#x00BB; Loc</nav><h1>Module <code>Dw__.Loc</code></h1></header><aside><p>This module represent architectural locations. Locations in DWARF information are represented as a little stack language (represented as <a href="index.html#type-dwop"><code>dwop</code></a><code> list</code>) which describes how to compute the target value from the current concrete state. This computation can be arbitrarily complex, for example take half of the value from the high bits of a register and then the other half from memory at a specific address coming from another register.</p><p>Those expression are not directly usable to guide the type inference, as we would much more like simple direct information like &quot;This value is in that register&quot;. To solve this, there is a custom type <a href="index.html#type-t"><code>t</code></a> that interpret simple static locations directly and leaves more complex location uninterpreted.</p><p>This interpretation is currently very basic. It remains to be seen if it actually need to be improved.</p></aside><dl><dt class="spec type" id="type-dwop"><a href="#type-dwop" class="anchor"></a><code><span class="keyword">type</span> dwop</code><code> = Dwarf.operation</code></dt><dd><p>The type of a dwarf location stack operation</p></dd></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = </code><table class="variant"><tr id="type-t.Register" class="anchored"><td class="def constructor"><a href="#type-t.Register" class="anchor"></a><code>| </code><code><span class="constructor">Register</span> <span class="keyword">of</span> <a href="../../State/Reg/index.html#type-t">State.Reg.t</a></code></td><td class="doc"><p>In the register</p></td></tr><tr id="type-t.RegisterOffset" class="anchored"><td class="def constructor"><a href="#type-t.RegisterOffset" class="anchor"></a><code>| </code><code><span class="constructor">RegisterOffset</span> <span class="keyword">of</span> <a href="../../State/Reg/index.html#type-t">State.Reg.t</a> * int</code></td><td class="doc"><p>At register + offset address</p></td></tr><tr id="type-t.StackFrame" class="anchored"><td class="def constructor"><a href="#type-t.StackFrame" class="anchor"></a><code>| </code><code><span class="constructor">StackFrame</span> <span class="keyword">of</span> int</code></td><td class="doc"><p>On the stackFrame with offset</p></td></tr><tr id="type-t.Global" class="anchored"><td class="def constructor"><a href="#type-t.Global" class="anchor"></a><code>| </code><code><span class="constructor">Global</span> <span class="keyword">of</span> <a href="../../Elf/SymTable/index.html#type-sym_offset">Elf.SymTable.sym_offset</a></code></td><td class="doc"><p>Global variable with an offset</p></td></tr><tr id="type-t.Dwarf" class="anchored"><td class="def constructor"><a href="#type-t.Dwarf" class="anchor"></a><code>| </code><code><span class="constructor">Dwarf</span> <span class="keyword">of</span> <span><a href="index.html#type-dwop">dwop</a> list</span></code></td><td class="doc"><p>Uninterpreted dwarf location</p></td></tr></table></dt><dd><p>The type of a location, as static as possible</p></dd></dl><dl><dt class="spec type" id="type-linksem_t"><a href="#type-linksem_t" class="anchor"></a><code><span class="keyword">type</span> linksem_t</code><code> = <span><a href="index.html#type-dwop">dwop</a> list</span></code></dt><dd><p>The type of a location in linksem format</p></dd></dl><dl><dt class="spec value" id="val-vDW_OP_addr"><a href="#val-vDW_OP_addr" class="anchor"></a><code><span class="keyword">val</span> vDW_OP_addr : int</code></dt><dd><p>The integer value of the DW_OP_addr constant in DWARF standard</p><p>TODO this should come from LinkSem's dwarf</p></dd></dl><dl><dt class="spec value" id="val-vDW_OP_reg0"><a href="#val-vDW_OP_reg0" class="anchor"></a><code><span class="keyword">val</span> vDW_OP_reg0 : int</code></dt><dd><p>The integer value of the DW_OP_reg0 constant in DWARF standard</p></dd></dl><dl><dt class="spec value" id="val-vDW_OP_breg0"><a href="#val-vDW_OP_breg0" class="anchor"></a><code><span class="keyword">val</span> vDW_OP_breg0 : int</code></dt><dd><p>The integer value of the DW_OP_breg0 constant in DWARF standard</p></dd></dl><dl><dt class="spec value" id="val-of_linksem"><a href="#val-of_linksem" class="anchor"></a><code><span class="keyword">val</span> of_linksem : <span>?&#8288;amap:<a href="../../Arch/index.html#type-dwarf_reg_map">Arch.dwarf_reg_map</a></span> <span>&#45;&gt;</span> <a href="../../Elf/File/index.html#type-t">Elf.File.t</a> <span>&#45;&gt;</span> <a href="index.html#type-linksem_t">linksem_t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Convert a linksem location description into a <a href="index.html#type-t"><code>Loc.t</code></a></p><p>Very naive for now : If the list has a single element that we can translate directly, we do. Otherwise, we dump it into the <a href="index.html#type-t.Dwarf"><code>t.Dwarf</code></a> constructor</p></dd></dl><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Convert the location to a string. This is not reversible</p></dd></dl><dl><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val</span> compare : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Compare two location. Loc.t is not compatible with polymorphic compare</p></dd></dl><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Utils/index.html#module-Pp">Utils.Pp</a>.document</code></dt><dd><p>Pretty-print the location</p></dd></dl></div></body></html>