<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Exp__Sums (read-dwarf.Exp__Sums)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">read-dwarf</a> &#x00BB; Exp__Sums</nav><h1>Module <code>Exp__Sums</code></h1><p>This module provide sum manipulation functionality on top of typed expression <span class="xref-unresolved" title="unresolved reference to &quot;Typed.t&quot;"><code>Typed</code>.t</span></p><p>This provide a semantic view of sums as list of terms and conversion</p></header><dl><dt class="spec value" id="val-split"><a href="#val-split" class="anchor"></a><code><span class="keyword">val</span> split : <span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span> list</span></code></dt><dd><p>Split an expression as a list of terms. This function sees through +,- and extracts.</p><p>Any expression <code>e</code> should have the same semantic meaning as <code>Typed.sum (split e)</code>.</p><p>TODO I need to sort according to an arbitrary order to be able to compare reliably. This will probably be part of a more general simplifier work.</p></dd></dl><dl><dt class="spec value" id="val-merge"><a href="#val-merge" class="anchor"></a><code><span class="keyword">val</span> merge : <span>size:int</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span> list</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span></code></dt><dd><p>Merge a list of terms into a sum expression. This is an upgrade of <span class="xref-unresolved" title="unresolved reference to &quot;Typed.sum&quot;"><code>Typed</code>.sum</span> to allow empty lists. In the case of an empty list, a <code>0</code> of size <code>size</code> will be inserted instead.</p></dd></dl><dl><dt class="spec value" id="val-add_term"><a href="#val-add_term" class="anchor"></a><code><span class="keyword">val</span> add_term : <span>term:<span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span></code></dt><dd><p>Add a <code>term</code> to a sum, This is the same, as using <a href="index.html#val-split"><code>split</code></a>, then adding <code>term</code> to the list, then merging with <span class="xref-unresolved" title="unresolved reference to &quot;Typed.sum&quot;"><code>Typed</code>.sum</span></p></dd></dl><dl><dt class="spec value" id="val-remove_term"><a href="#val-remove_term" class="anchor"></a><code><span class="keyword">val</span> remove_term : <span>equal:<span>(<span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span> <span>&#45;&gt;</span> bool)</span></span> <span>&#45;&gt;</span> <span>term:<span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span> option</span></code></dt><dd><p>Remove a <code>term</code> from a sum. Return <code>Some res</code> if successful and <code>None</code> otherwise.</p></dd></dl><dl><dt class="spec value" id="val-smart_substract"><a href="#val-smart_substract" class="anchor"></a><code><span class="keyword">val</span> smart_substract : <span>equal:<span>(<span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span> <span>&#45;&gt;</span> bool)</span></span> <span>&#45;&gt;</span> <span>term:<span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span></code></dt><dd><p>Same as <a href="index.html#val-remove_term"><code>remove_term</code></a> but if the <code>term</code> is not found, add the opposite (<a href="../Ast/index.html#type-unop.Bvneg"><code>Ast.unop.Bvneg</code></a>) to the sum</p></dd></dl><dl><dt class="spec value" id="val-split_concrete"><a href="#val-split_concrete" class="anchor"></a><code><span class="keyword">val</span> split_concrete : <span><span>(<span class="type-var">'v</span>, <a href="../Ast/index.html#type-no">Ast.no</a>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'v</span>, <a href="../Ast/index.html#type-no">Ast.no</a>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span> option</span> * <a href="../Utils/BitVec/index.html#type-t">Utils.BitVec.t</a></code></dt><dd><p>Split away the concrete terms of the sum and the symbolic part. The symbolic part can be <code>None</code> if the expression was fully concrete. If the symbolic part is <code>Some e</code>, then <code>not </code><a href="index.html#val-has_concrete_term"><code>has_concrete_term</code></a><code> e</code> will hold.</p></dd></dl><dl><dt class="spec value" id="val-has_concrete_term"><a href="#val-has_concrete_term" class="anchor"></a><code><span class="keyword">val</span> has_concrete_term : <span><span>(<span class="type-var">'v</span>, <span class="type-var">'m</span>)</span> <a href="../Exp/Typed/index.html#type-t">Exp.Typed.t</a></span> <span>&#45;&gt;</span> bool</code></dt><dd><p>Tells if an expression has a concrete term</p></dd></dl></div></body></html>