<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Preprocess (read-dwarf.Isla.Preprocess)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">read-dwarf</a> &#x00BB; <a href="../index.html">Isla</a> &#x00BB; Preprocess</nav><h1>Module <code>Isla.Preprocess</code></h1><p>This module is about preprocessing isla traces. This includes:</p><ul><li>Removing exceptional traces</li><li>Removing useless operation and simplifying</li><li>Removing all effect of initialization before cycle</li><li>Splitting branches that are non exceptional the right way</li></ul><p>This is important because isla print everything the sail code does, but, as the sail code is not written for performance, it will often do a lot of computation and then later decide it wasn't useful and discard the result. This quickly make isla traces bloated.</p><p>Once preprocessed, there is only a simple list of traces.</p><ul><li>Special instructions like smc have zero traces and must be provided with special semantics</li><li>Normal instructions have one traces (all exceptional cases are classified as UB)</li><li>Branching instruction have more than one traces.</li></ul><p>For example at time of writing, a basic load like <code>ldr x0, [x1]</code> has about 1300 variable before preprocessing and 27 after.</p><p>TODO: Remove useless register reads (Need a model where reading register has no side effect).</p></header><dl><dt class="spec value" id="val-simplify_trc"><a href="#val-simplify_trc" class="anchor"></a><code><span class="keyword">val</span> simplify_trc : <a href="../Base/index.html#type-rtrc">Base.rtrc</a> <span>&#45;&gt;</span> <a href="../Base/index.html#type-rtrc">Base.rtrc</a></code></dt><dd><p>Simplify a simple trace by removing all useless variables</p></dd></dl><dl><dt class="spec value" id="val-preprocess"><a href="#val-preprocess" class="anchor"></a><code><span class="keyword">val</span> preprocess : <a href="../Server/index.html#type-config">Server.config</a> <span>&#45;&gt;</span> <a href="../Server/index.html#type-trcs">Server.trcs</a> <span>&#45;&gt;</span> <span><a href="../Base/index.html#type-rtrc">Base.rtrc</a> list</span></code></dt><dd><p>Preprocess a group of traces, by removing useless registers (according to the config), removing initialisation code and simplifying with <a href="index.html#val-simplify_trc"><code>simplify_trc</code></a></p></dd></dl></div></body></html>