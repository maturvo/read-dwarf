<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (read-dwarf.Utils.RngMap.Make)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">read-dwarf</a> &#x00BB; <a href="../../index.html">Utils</a> &#x00BB; <a href="../index.html">RngMap</a> &#x00BB; Make</nav><h1>Module <code>RngMap.Make</code></h1><p>How to make a <code>RngMap</code> from a <a href="../module-type-LenObject/index.html"><code>LenObject</code></a></p></header><h3 class="heading">Parameters</h3><ul><li><code><a href="argument-1-Obj/index.html">Obj</a> : <a href="../index.html#module-type-LenObject">LenObject</a></code></li></ul><h3 class="heading">Signature</h3><dl><dt class="spec type" id="type-obj"><a href="#type-obj" class="anchor"></a><code><span class="keyword">type</span> obj</code><code> = <a href="argument-1-Obj/index.html#type-t">Obj.t</a></code></dt><dd><p>The type of the contained object</p></dd></dl><dl><dt class="spec type" id="type-obj_off"><a href="#type-obj_off" class="anchor"></a><code><span class="keyword">type</span> obj_off</code><code> = <a href="index.html#type-obj">obj</a> * int</code></dt><dd><p>The type of an object with an offset</p></dd></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>The type of the map from address ranges to <a href="index.html#type-obj"><code>obj</code></a></p></dd></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <a href="index.html#type-t">t</a></code></dt><dd><p>An empty <code>RngMap</code></p></dd></dl><dl><dt class="spec value" id="val-is_in"><a href="#val-is_in" class="anchor"></a><code><span class="keyword">val</span> is_in : <span>objaddr:int</span> <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> bool</code></dt><dd><p>Test if an address is inside the object at address <code>objaddr</code></p></dd></dl><dl><dt class="spec value" id="val-at"><a href="#val-at" class="anchor"></a><code><span class="keyword">val</span> at : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a></code></dt><dd><p>Get the object containing the address. Throw <code>Not_found</code> if no object contains the address</p></dd></dl><dl><dt class="spec value" id="val-at_opt"><a href="#val-at_opt" class="anchor"></a><code><span class="keyword">val</span> at_opt : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><a href="index.html#type-obj">obj</a> option</span></code></dt><dd><p>Get the object containing the address. <code>None</code> if no object contains the address</p></dd></dl><dl><dt class="spec value" id="val-at_off"><a href="#val-at_off" class="anchor"></a><code><span class="keyword">val</span> at_off : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-obj_off">obj_off</a></code></dt><dd><p>Get the object containing the address and the offset of the address inside the object</p><pre><code class="ml">at_off map addr = (obj, off) </code></pre><p>means:</p><pre>         |                      |           |         |
       map 0                 obj start    point    obj end
         |&lt;--------------addr--------------&gt;|
                                |&lt;---off---&gt;|
                                |&lt;------len obj------&gt;|</pre><p>In other words, <code>at_off</code> allow a change of coordinate from the map frame to the object frame.</p><p>Throw <code>Not_found</code> if no object contains the address</p></dd></dl><dl><dt class="spec value" id="val-at_off_opt"><a href="#val-at_off_opt" class="anchor"></a><code><span class="keyword">val</span> at_off_opt : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><a href="index.html#type-obj_off">obj_off</a> option</span></code></dt><dd><p>Get the object containing the address and the offset of the address inside the object. See <a href="index.html#val-at_off"><code>at_off</code></a> for more explanation.</p><p><code>None</code> if no object contains the address</p></dd></dl><dl><dt class="spec value" id="val-update"><a href="#val-update" class="anchor"></a><code><span class="keyword">val</span> update : <span>(<a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Update the binding containing the provided address. If no binding contained the address, this is a no-op</p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : <span>(<a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Map a function over all the objects</p></dd></dl><dl><dt class="spec value" id="val-mapi"><a href="#val-mapi" class="anchor"></a><code><span class="keyword">val</span> mapi : <span>(int <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Map a function over all the objects with their address</p></dd></dl><dl><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val</span> iter : <span>(<a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Iter a function over all the objects</p></dd></dl><dl><dt class="spec value" id="val-iteri"><a href="#val-iteri" class="anchor"></a><code><span class="keyword">val</span> iteri : <span>(int <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Iter a function over all the objects with their address</p></dd></dl><dl><dt class="spec value" id="val-clear_at"><a href="#val-clear_at" class="anchor"></a><code><span class="keyword">val</span> clear_at : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Clear the object containing the address if any</p></dd></dl><dl><dt class="spec value" id="val-clear"><a href="#val-clear" class="anchor"></a><code><span class="keyword">val</span> clear : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>pos:int</span> <span>&#45;&gt;</span> <span>len:int</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Clear an area of the RngMap.</p><p>If an object is partially in the specified block. It will be removed entirely.</p><p>See <a href="index.html#val-clear_crop"><code>clear_crop</code></a> for a different behavior. See <a href="index.html#val-clear_bounds"><code>clear_bounds</code></a> to allow some bounds to be infinity.</p></dd></dl><dl><dt class="spec value" id="val-clear_crop"><a href="#val-clear_crop" class="anchor"></a><code><span class="keyword">val</span> clear_crop : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>pos:int</span> <span>&#45;&gt;</span> <span>len:int</span> <span>&#45;&gt;</span> <span>crop:<span>(<span>pos:int</span> <span>&#45;&gt;</span> <span>len:int</span> <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a>)</span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Clear an area of the RngMap.</p><p>If a block is partially in the specified block, It will be cropped by using the provided crop function.</p><p><code>crop ~pos ~len obj</code> is supposed to crop the object <code>obj</code> and keep only the segment <code>[pos:pos +len)</code> of it (in the object coordinate frame).</p></dd></dl><dl><dt class="spec value" id="val-clear_bounds"><a href="#val-clear_bounds" class="anchor"></a><code><span class="keyword">val</span> clear_bounds : <span>?&#8288;start:int</span> <span>&#45;&gt;</span> <span>?&#8288;endp:int</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Same as <a href="index.html#val-clear"><code>clear</code></a> but if a bound is missing, then we erase until infinity in that direction. The target interval is <code>[start:endp)</code>.</p><p>In particular <code>clear_bounds map = </code><a href="index.html#val-empty"><code>empty</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-obj">obj</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Add an object at a specific address. The whole range of addresses covered by the object must be free</p></dd></dl><dl><dt class="spec value" id="val-addp"><a href="#val-addp" class="anchor"></a><code><span class="keyword">val</span> addp : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-obj_off">obj_off</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Add an object at a specific address. The whole range of addresses covered by the object must be free</p></dd></dl><dl><dt class="spec value" id="val-bindings"><a href="#val-bindings" class="anchor"></a><code><span class="keyword">val</span> bindings : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(int * <a href="index.html#type-obj">obj</a>)</span> list</span></code></dt><dd><p>Give the list of bindings</p></dd></dl><dl><dt class="spec value" id="val-to_seq"><a href="#val-to_seq" class="anchor"></a><code><span class="keyword">val</span> to_seq : <span>?&#8288;start:int</span> <span>&#45;&gt;</span> <span>?&#8288;endp:int</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(int * <a href="index.html#type-obj">obj</a>)</span> <a href="../../index.html#module-Seq">Utils.Seq</a>.t</span></code></dt><dd><p>Return a sequence of all the object overlapping the range <code>[start:endp)</code>. The first and last element may not be entierly contained in the ranged. If any bound is unspecified, it goes to infinity in that direction.</p><p>In particular <code>to_seq map</code> will iterate the entiere <code>RngMap</code></p></dd></dl></div></body></html>