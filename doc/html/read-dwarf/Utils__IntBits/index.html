<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Utils__IntBits (read-dwarf.Utils__IntBits)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">read-dwarf</a> &#x00BB; Utils__IntBits</nav><h1>Module <code>Utils__IntBits</code></h1><p>Manipulate an int as bitfield of size 31 or 63.</p><p>I'm tired of having to think about bit shifts and bitwise operations when I do that stuff</p><p>Little endian indexing (0 is the least significant bit)</p><p>Ranges are specified with and index and a length. The index must be in <code>[0,length)</code> and the length must be in <code>(0,length]</code>. Those conditions will be named &quot;valid range&quot;. Any range specified in that way can go after the end. When reading, it will behave as if it was zeroes, and on writes, all bits after the end are discarded.</p><p>All unsafe function implicitely assume that all indexes and ranges are valid. All safe functions throw if those conditions are not met.</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = int</code></dt><dd><p>The type of a int as a bitfield. This is just to make signatures clearer</p></dd></dl><dl><dt class="spec value" id="val-length"><a href="#val-length" class="anchor"></a><code><span class="keyword">val</span> length : int</code></dt><dd><p>The length of an integer in bits (<code>Sys.int_size</code>)</p></dd></dl><dl><dt class="spec value" id="val-back"><a href="#val-back" class="anchor"></a><code><span class="keyword">val</span> back : int</code></dt><dd><p>The last index in an integer</p></dd></dl><dl><dt class="spec value" id="val-check_index"><a href="#val-check_index" class="anchor"></a><code><span class="keyword">val</span> check_index : int <span>&#45;&gt;</span> unit</code></dt><dd><p>Check that the index is valid to index an integer.</p><p>Throw <code>Invalid_argument</code> if the index is not valid</p></dd></dl><dl><dt class="spec value" id="val-check_range"><a href="#val-check_range" class="anchor"></a><code><span class="keyword">val</span> check_range : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dd><p>Check that the range is valid to index an integer. See module documentation (<code>IntBits</code>) for the definition of a valid range.</p><p>Throw <code>Invalid_argument</code> if the range is not valid.</p></dd></dl><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : bool <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Initialize an int with all zeros or all ones depending on the boolean</p></dd></dl><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> bool</code></dt><dd><p>Get a bit at a specific index. See <a href="index.html#val-unsafe_get"><code>unsafe_get</code></a></p></dd></dl><dl><dt class="spec value" id="val-unsafe_get"><a href="#val-unsafe_get" class="anchor"></a><code><span class="keyword">val</span> unsafe_get : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> bool</code></dt><dd><p>Unsafe version of <a href="index.html#val-get"><code>get</code></a></p></dd></dl><dl><dt class="spec value" id="val-set"><a href="#val-set" class="anchor"></a><code><span class="keyword">val</span> set : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Set a bit at a specific index. See <a href="index.html#val-unsafe_set"><code>unsafe_set</code></a></p></dd></dl><dl><dt class="spec value" id="val-unsafe_set"><a href="#val-unsafe_set" class="anchor"></a><code><span class="keyword">val</span> unsafe_set : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Unsafe version of <a href="index.html#val-set"><code>set</code></a></p></dd></dl><dl><dt class="spec value" id="val-clear"><a href="#val-clear" class="anchor"></a><code><span class="keyword">val</span> clear : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Clear a bit at a specific index. See <a href="index.html#val-unsafe_clear"><code>unsafe_clear</code></a></p></dd></dl><dl><dt class="spec value" id="val-unsafe_clear"><a href="#val-unsafe_clear" class="anchor"></a><code><span class="keyword">val</span> unsafe_clear : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Unsafe version of <a href="index.html#val-clear"><code>clear</code></a></p></dd></dl><dl><dt class="spec value" id="val-setb"><a href="#val-setb" class="anchor"></a><code><span class="keyword">val</span> setb : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> bool <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Set a bit at a specific index according to a boolean. See <a href="index.html#val-unsafe_setb"><code>unsafe_setb</code></a></p></dd></dl><dl><dt class="spec value" id="val-unsafe_setb"><a href="#val-unsafe_setb" class="anchor"></a><code><span class="keyword">val</span> unsafe_setb : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> bool <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Unsafe version of <a href="index.html#val-setb"><code>setb</code></a></p></dd></dl><dl><dt class="spec value" id="val-mask"><a href="#val-mask" class="anchor"></a><code><span class="keyword">val</span> mask : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>mask i l</code> creates a mask stating at i of length l. This means that the bits of the output in the range <code>[i; i+l)</code> are ones and the others are 0.</p><p>See <a href="index.html#val-unsafe_mask"><code>unsafe_mask</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-unsafe_mask"><a href="#val-unsafe_mask" class="anchor"></a><code><span class="keyword">val</span> unsafe_mask : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Unsafe version of <a href="index.html#val-mask"><code>mask</code></a></p></dd></dl><dl><dt class="spec value" id="val-set_range"><a href="#val-set_range" class="anchor"></a><code><span class="keyword">val</span> set_range : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>set_range bf i l</code> sets the range <code>[i; i+l)</code> to ones in <code>bf</code>. See <a href="index.html#val-unsafe_set_range"><code>unsafe_set_range</code></a></p></dd></dl><dl><dt class="spec value" id="val-unsafe_set_range"><a href="#val-unsafe_set_range" class="anchor"></a><code><span class="keyword">val</span> unsafe_set_range : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Unsafe version of <a href="index.html#val-set_range"><code>set_range</code></a></p></dd></dl><dl><dt class="spec value" id="val-clear_range"><a href="#val-clear_range" class="anchor"></a><code><span class="keyword">val</span> clear_range : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>clear_range bf i l</code> sets the range <code>[i; i+l)</code> to zeroes in <code>bf</code>. See <a href="index.html#val-unsafe_set_range"><code>unsafe_set_range</code></a></p></dd></dl><dl><dt class="spec value" id="val-unsafe_clear_range"><a href="#val-unsafe_clear_range" class="anchor"></a><code><span class="keyword">val</span> unsafe_clear_range : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Unsafe version of <a href="index.html#val-clear_range"><code>clear_range</code></a></p></dd></dl><dl><dt class="spec value" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span class="keyword">val</span> sub : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>sub bf i l</code> outputs the range <code>[i; i+l)</code> of bf. The bits above l of the result are zeroes.</p><p>See <a href="index.html#val-unsafe_sub"><code>unsafe_sub</code></a></p></dd></dl><dl><dt class="spec value" id="val-unsafe_sub"><a href="#val-unsafe_sub" class="anchor"></a><code><span class="keyword">val</span> unsafe_sub : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Unsafe version of <a href="index.html#val-sub"><code>sub</code></a></p></dd></dl><dl><dt class="spec value" id="val-set_sub"><a href="#val-set_sub" class="anchor"></a><code><span class="keyword">val</span> set_sub : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>set_sub bf i l data</code> sets the <code>[i; i+l)</code> range of <code>bf</code> to <code>data</code>. The bits above <code>l</code> of <code>data</code> are ignored.</p><p>See <a href="index.html#val-unsafe_set_sub"><code>unsafe_set_sub</code></a></p></dd></dl><dl><dt class="spec value" id="val-unsafe_set_sub"><a href="#val-unsafe_set_sub" class="anchor"></a><code><span class="keyword">val</span> unsafe_set_sub : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Unsafe version of <a href="index.html#val-set_sub"><code>set_sub</code></a>. However the bits above l of data must be zeroes</p></dd></dl><dl><dt class="spec value" id="val-blit"><a href="#val-blit" class="anchor"></a><code><span class="keyword">val</span> blit : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>unsafe_blit src isrc dest idest len</code> copies <code>[isrc; isrc+len)</code> of <code>src</code> into <code>[idest; idest +l)</code> of <code>dest</code>.</p><p>See <a href="index.html#val-unsafe_blit"><code>unsafe_blit</code></a></p></dd></dl><dl><dt class="spec value" id="val-unsafe_blit"><a href="#val-unsafe_blit" class="anchor"></a><code><span class="keyword">val</span> unsafe_blit : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Unsafe version of <a href="index.html#val-blit"><code>blit</code></a></p></dd></dl></div></body></html>